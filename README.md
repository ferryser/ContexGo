# ContexGo

**ContexGo** 是一个本地优先（Local-first）的个人上下文感知 Agent。

它致力于解决工程化层面的核心挑战：如何将连续、稠密且往往伴随延迟的多模态人类行为信号，转换为稳定、可对齐、可学习且可解释的上下文表示。

通过将原始行为流压缩为结构化的时间窗口摘要，并结合大模型（LLM）进行受控的语义解释，ContexGo 帮助用户构建一个可动态重算的个人行为上下文索引。

## 核心架构原则

ContexGo 的架构建立在对行为数据的分层处理之上，强调数据流的结构化与解释层的分离。

### 1. 分层上下文模型
系统明确区分了客观事实与主观解释，通过三层架构实现数据的逐步抽象：

* **事件层 (Event Layer):** 仅记录“发生了什么变化”。这是系统的不可变（Append-only）基石，不包含高层语义判断。
* **结构化摘要层 (Structured Summary Layer):** 对事件流在固定时间窗口内的结构化投影。它是系统状态的核心，负责统计与聚合。
* **解释层 (Interpretation Layer):** 由 LLM 生成的自然语言视图（View）。它作为一种可被推翻、重算和替换的“软解释”，不作为系统底层的唯一事实。

### 2. 正交的时间与任务结构
系统同时维护两种正交的数据结构，以适应复杂的行为模式：

* **时间窗口 (Time Window):**
    * 系统的稳定主轴（如固定 5 分钟粒度）。
    * 用于承载统计数据、同步状态以及触发重算。
    * 回答核心问题：“在该时间段内，发生了什么强度的行为？”
* **任务区间 (Task Span):**
    * 覆盖在多个时间窗口之上的逻辑区间。
    * 作为引用关系存在，用于连接离散的时间窗口。
    * 回答语义问题：“这些分散的时间片段是否属于同一个逻辑任务？”

### 3. 异步一致性策略
面对多模态信号（截图/键鼠/窗口/词元）天然存在的重叠、乱序和语义滞后特性，ContexGo 不在事件采集层强求对齐，而是通过高层的结构化摘要与解释层来后置处理一致性。这允许系统以非阻塞的方式摄入高频信号，并接受语义理解的渐进式更新。

## 系统处理流程

ContexGo 构建了一个从原始信号到自然语言解释的单向（但在解释层可循环）数据管道：

### Phase 1: 多模态感知与去重
* **本地信号采集:** 摄入屏幕截图（仅用于差异分析）、外设活跃度（键盘/鼠标频率）以及窗口/端口状态。
* **变化检测:** 采用 MineContext 策略，聚焦于“行为是否发生显著变化”而非理解具体内容，将连续的稳定状态折叠为物理区间。

### Phase 2: 受控语义生成
* **Schema 驱动:** LLM 在严格受控的 Schema 下运行，生成候选任务词元（Task Tokens）。
* **置信度标注:** 每个生成的语义单元均附带 Confidence 评分与 Evidence References（行为变化来源），允许系统容错与回溯。

### Phase 3: 统一事件流构建
所有输入最终归一化为标准的结构化事件：
* **基础事件:** `input_activity`, `window_focus`, `idle`
* **任务事件:** `task_start`, `task_end`, `task_token`
所有事件均具备明确的时间属性与可合并的 Payload。

### Phase 4: 时间窗口聚合 (Core)
以固定时间窗口为单位，系统计算并输出核心状态对象：

```json
{
  "window": "10:00–10:05",
  "task_started": ["project_alpha_init"],
  "task_ended": [],
  "task_tokens": {
    "project_alpha_init": ["git_config", "scaffold"]
  },
  "input_level": {
    "keyboard": "high",
    "mouse": "low"
  },
  "window_switch": "low",
  "confidence": 0.85
}
```

### Phase 5: 动态解释与重算
LLM 消费上述结构化摘要，结合前后窗口上下文生成人类可读的解释文本。
* **动态性:** 当检测到新的任务词元或上下文发生显著漂移时，系统会触发有限重算。
* **修正机制:** 自然语言摘要作为“视图”，可随着后续信号的补充而被更新或替换，从而构建一个不断逼近真实的上下文表示。

## 项目定位

ContexGo 作为一个工程优先的 Agent 项目，旨在探索个人上下文数据的结构合理性与长期可演进性。

* **面向用户:** 高自驱力的 Power Users 与开发者。
* **设计哲学:** 结构优先于功能，边界优先于智能。
* **核心价值:** 构建一个可被不断解释、修正和重算的个人数字化上下文。

## License

[License Type Placeholder]
